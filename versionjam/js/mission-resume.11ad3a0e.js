(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["mission-resume"],{1202:function(e,s,i){"use strict";i.r(s);var t=function(){var e=this,s=e.$createElement,i=e._self._c||s;return e.mission?i("div",{attrs:{id:"missionresume"}},[i("h1",[e._v("Mission")]),i("ul",[i("li",{staticClass:"mission"},[i("span",{staticClass:"name"},[e._v(e._s(e.mission.name))]),i("p",{staticClass:"description"},[e._v(e._s(e.mission.description))]),i("p",[e._v("Probabilité de succès: "+e._s(e.probaSucces)+"%")])])]),i("h1",[e._v("Résultat de la mission")]),i("div",{staticClass:"resultat",on:{click:function(s){e.$router.push("/squads")}}},["missionSuccess"===e.squad.status?i("div",[i("h2",[e._v("Mission accomplie !")])]):"missionFail"===e.squad.status?i("div",[i("div",{staticClass:"icon fail"}),i("h2",[e._v("Echec de la mission")])]):"dead"===e.squad.status?i("div",[i("div",{staticClass:"icon dead"}),i("h2",[e._v("Echec critique")])]):e._e()]),e._l(e.squad.missionResult.resume,function(s,t){return i("p",{key:t},[e._v(e._s(s))])}),"missionSuccess"===e.squad.status?[i("h1",[e._v("Ressources obtenues")]),i("ul",{staticClass:"ressources"},e._l(e.squad.missionResult.ressources,function(s,t){return i("li",{key:t},[s>0?[e._v("\n                    "+e._s(s)+" "),i("div",{class:["icon",t]})]:e._e()],2)})),e.squad.missionResult.squad||e.squad.missionResult.scientific?[i("h1",[e._v("Personnes recrutées")]),i("ul",{staticClass:"ressources"},[e.squad.missionResult.squad?i("li",[i("div",{staticClass:"icon squad"}),e._v(" de niveau "+e._s(e.squad.missionResult.squad)+"\n                ")]):e._e(),e.squad.missionResult.scientific?i("li",[i("div",{staticClass:"icon scientific"}),e._v(" de niveau "+e._s(e.squad.missionResult.squad)+"\n                ")]):e._e()])]:e._e()]:e._e()],2):e._e()},n=[],u=(i("cadf"),i("551c"),i("097d"),i("7de0")),a=i("7a51"),o=i("025e"),r={name:"MissionResume",data:function(){return{mission:null,squad:null}},created:function(){var e=u["m"].squads[this.indexSquad];this.squad=Object(o["b"])(e),this.mission=this.squad.mission,Object(a["c"])(e)},computed:{indexSquad:function(){return parseInt(this.$route.params.indexSquad)},probaSucces:function(){var e=Math.round(100*this.squad.missionResult.probaSuccess);return e=Math.max(0,Math.min(100,e)),e}}},c=r,l=(i("bb21"),i("2877")),d=Object(l["a"])(c,t,n,!1,null,"3e3c606f",null);d.options.__file="MissionResume.vue";s["default"]=d.exports},"456d":function(e,s,i){var t=i("4bf8"),n=i("0d58");i("5eda")("keys",function(){return function(e){return n(t(e))}})},"5eda":function(e,s,i){var t=i("5ca1"),n=i("8378"),u=i("79e5");e.exports=function(e,s){var i=(n.Object||{})[e]||Object[e],a={};a[e]=s(i),t(t.S+t.F*u(function(){i(1)}),"Object",a)}},"6bdd":function(e,s,i){},"7a51":function(e,s,i){"use strict";i.d(s,"e",function(){return o}),i.d(s,"b",function(){return r}),i.d(s,"c",function(){return c}),i.d(s,"a",function(){return l}),i.d(s,"d",function(){return m});i("456d"),i("ac6a"),i("f751"),i("cadf"),i("551c"),i("097d");var t=i("025e"),n=i("7de0"),u=i("b3fb"),a=i("c75d"),o=function(e,s,i){e.status="mission",e.mission=s;var t=(s.distance+i)*n["m"].missionTimeFactor*1e3*10;e.missionDuree=i,e.missionEndTime=Date.now()+t,e.missionDifficulty=(s.level+n["m"].currentEpoch)*(5+i)/5,Object(a["c"])("MissionStarted")},r=function(e){delete e.missionEndTime;var s=(4+e.level)/(5+e.missionDifficulty);if(e.missionResult={probaSuccess:s,resume:[],levelGain:0},Math.random()<=s)e.status="missionSuccess",e.missionResult.levelGain+=1,e.missionResult.resume.push(Object(t["d"])(["Aucune activité à signaler","Comme sur des roulettes","Un vrai jeu d'enfant"])),Object(t["c"])(3)&&(e.missionResult.resume.push("On a trouvé des armes pour mieux se défendre lors des prochaines missions."),e.missionResult.levelGain+=Object(t["e"])(1,2)),Object(t["c"])(8)&&(e.missionResult.resume.push("On a trouvé des rescapés prêts à rejoindre nos rangs"),e.missionResult.levelGain+=Object(t["e"])(2,4)),Object(t["c"])(2)&&e.mission.squad&&(e.missionResult.resume.push(Object(t["d"])(["On a trouvé des rescapés prêts à rejoindre nos rangs.","Certains hommes se sont dit prêts à se battre pour nous.","Quelques bras cassés tiennent à nous aider, peut-être on en fera quelque-chose..."])),e.missionResult.squad=Object(t["e"])(1,e.mission.squad)),Object(t["c"])(3)&&e.mission.scientific&&(e.missionResult.resume.push(Object(t["d"])(["Ces scientifiques se cachaient sous les tables quand on est arrivés. Ils disent qu'ils peuvent nous aider.","On a trouvé plusieurs barbus en blouse là-bas. Ils pourraient aider au projet.","Des matheux estiment notre probabilité de survivre à 12%, mais prétendent qu'elles montent à 93% si on les emmène avec nous."])),e.missionResult.scientific=Object(t["e"])(e.mission.scientific-3,e.mission.scientific)),e.missionResult.ressources=d(e.mission.ressources,e.missionDuree,s);else{var i=.5*(1-s);Math.random()<=i?(e.status="dead",e.missionResult.resume.push(Object(t["d"])(["Nous avons perdu le contact avec l'escouade. Aucune idée de ce qu'ils sont devenus","Cette secte a lavé le cerveau de la moitié de l'équipe. Les autres ont été abattus par leur gourou.","Un groupe armé local a tendu une embuscade à l'escouade. Il n'y a aucun survivant."]))):(e.status="missionFail",e.missionResult.resume.push(Object(t["d"])(["Une bande armée nous est tombée dessus. On a rien pu faire pour garder le stock","Les gens sont fous. Dès qu'ils ont vu notre stock, ils se sont rués sur nous. On a du fuir avant qu'il y ait des morts.","L'endroit était occupé par trop de forces hostiles, impossible de s'en rapprocher."])))}},c=function(e){switch(delete e.mission,e.status){case"missionSuccess":Object(a["c"])("MissionComplete"),Object(u["a"])(e.missionResult.ressources),e.level+=e.missionResult.levelGain,e.missionResult.squad&&n["m"].squads.push({level:e.missionResult.squad,status:"idle"}),e.missionResult.scientific&&n["m"].scientifics.push({level:e.missionResult.scientific,status:"idle"}),e.status="idle";break;case"missionFail":Object(a["c"])("MissionAborted"),e.level=Math.max(1,e.level-Object(t["e"])(1,3)),e.status="idle";break;case"dead":Object(a["c"])("MissionFailed"),n["m"].squads.splice(n["m"].squads.indexOf(e),1);break}delete e.missionResult},l=function(e,s){return e?{water:Math.ceil((e.distance+s)*n["m"].ressourcesConsumptionFactor.water),food:Math.ceil((e.distance+s)/2*n["m"].ressourcesConsumptionFactor.food),fuel:Math.ceil(e.distance*n["m"].ressourcesConsumptionFactor.fuel)}:{}},d=function(e,s,i){if(!e)return{};var n=Object.assign({},e),u=Math.max(1,.25*(1+s)*i);return Object.keys(n).forEach(function(e){var i=Math.round(n[e]*u+.8*Object(t["e"])(-s,s));n[e]=Math.max(0,n[e]+i)}),n},m=[{name:"Résidence abandonnée",description:"Cette vieille maison juste à côté doit sûrement contenir quelques ressources utiles",level:1,distance:0,ressources:{food:3,water:5,metal:1,component:1}},{name:"Décharge",description:"Récupérez le métal et les composants utiles, et siphonnez tous les véhicules que vous trouvez",level:3,distance:1,ressources:{fuel:5,metal:10,component:5,battery:2}},{name:"Supermarché",description:"En espérant que ce supermarché n'a pas encore été complètement pillé",level:5,distance:3,ressources:{food:10,water:15,fuel:10,component:3,battery:3}},{name:"Université",description:"L'université est assez loin d'ici, mais notre meilleure chance de recruter des cerveaux",level:8,distance:8,ressources:{food:4,water:4,component:2},scientific:6},{name:"Prison",description:"Il nous faut un maximum d'hommes prêts à tout. Des prisonniers seraient prêts à nous aider si on leur promet une voie de sortie à ce merdier.",level:10,distance:6,ressources:{metal:2,food:4,water:4},squad:5},{name:"Centrale nucléaire",description:"Avec les fuites radioactives, c'est probablement un voyage en aller simple. Mais il nous faut absolument ce plutonium !",level:15,distance:5,ressources:{metal:4,component:5,battery:4,plutonium:3},scientific:10}]},b3fb:function(e,s,i){"use strict";i.d(s,"b",function(){return u}),i.d(s,"d",function(){return a}),i.d(s,"a",function(){return o}),i.d(s,"c",function(){return r});var t=i("9393"),n=(i("ac6a"),i("ffc1"),i("7de0")),u=function(e){return Object.entries(e).every(function(e){var s=Object(t["a"])(e,2),i=s[0],u=s[1];return n["m"].ressources[i]>=u})},a=function(e){Object.entries(e).forEach(function(e){var s=Object(t["a"])(e,2),i=s[0],u=s[1];n["m"].ressources[i]-=u})},o=function(e){Object.entries(e).forEach(function(e){var s=Object(t["a"])(e,2),i=s[0],u=s[1];n["m"].ressources[i]+=u})},r={water:{name:"Eau",description:"consommée par les équipes ou utilisée en laboratoire"},food:{name:"Nourriture",description:"il faut bien nourrir tous les gens de cette base"},fuel:{name:"Carburant",description:"nécessaire au déplacement des escouades"},metal:{name:"Métaux",description:"matière première composant de nombreux objets"},battery:{name:"Batteries",description:"alimentation de nombreux appareils et énergie de secours"},component:{name:"Composants",description:"sert à la fabrication d'appareils plus ou moins complexes"},plutonium:{name:"Plutonium",description:"carburant principal des réacteurs"}}},bb21:function(e,s,i){"use strict";var t=i("6bdd"),n=i.n(t);n.a}}]);
//# sourceMappingURL=mission-resume.11ad3a0e.js.map