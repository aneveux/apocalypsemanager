(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["mission"],{1130:function(e,s,t){"use strict";var i=t("d41f"),n=t.n(i);n.a},"456d":function(e,s,t){var i=t("4bf8"),n=t("0d58");t("5eda")("keys",function(){return function(e){return n(i(e))}})},"486a":function(e,s,t){"use strict";t.r(s);var i=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{attrs:{id:"mission"}},[t("ul",[t("Squad",{attrs:{indexSquad:e.indexSquad}})],1),t("h1",[e._v("Choix de la mission")]),t("ul",e._l(e.missions,function(s,i){return e.selectedMission&&e.selectedMission!==s?e._e():t("li",{key:i,class:["mission",{selected:e.selectedMission===s}],on:{click:function(t){e.selectedMission?e.selectedMission=null:e.selectedMission=s}}},[t("span",{staticClass:"name"},[e._v(e._s(s.name))]),e.selectedMission===s?t("p",{staticClass:"description"},[e._v(e._s(s.description))]):e._e(),t("p",{staticClass:"ressources"},[e._v("Ressources récupérables:\n                "),t("ul",[e._l(s.ressources,function(e,s){return t("li",{key:s},[t("div",{class:["icon",s]})])}),s.squad?t("li",[t("div",{staticClass:"icon squad"})]):e._e(),s.scientific?t("li",[t("div",{staticClass:"icon scientific"})]):e._e()],2)]),t("p",{staticClass:"level"},[e._v("\n              Distance: "+e._s(s.distance)+" km -\n              Niveau de compétence recommandé:\n              "),t("span",{class:{insufficient:s.level>e.squad.level}},[e._v(e._s(s.level))])])])})),e.selectedMission?[t("h1",[e._v("Durée de la mission")]),t("div",{staticClass:"params"},[t("input",{directives:[{name:"model",rawName:"v-model.number",value:e.dureeMission,expression:"dureeMission",modifiers:{number:!0}}],attrs:{type:"range",name:"dureemission",id:"dureemission",min:"1",max:"5"},domProps:{value:e.dureeMission},on:{__r:function(s){e.dureeMission=e._n(s.target.value)},blur:function(s){e.$forceUpdate()}}}),t("span",{staticClass:"duree"},[e._v(e._s(e.dureeMission)+" h")]),t("p",{staticClass:"ressources"},[e._v("Ressources requises:\n            "),t("ul",e._l(e.requiredRessources,function(s,i){return t("li",{key:i,class:{insufficient:!e.hasRessources((n={},n[i]=s,n))}},[s>0?[e._v("\n                      "+e._s(s)+" "),t("div",{class:["icon",i]})]:e._e()],2);var n}))])]),e.hasRessources(e.requiredRessources)?e._e():t("div",{staticClass:"action disabled"},[t("a",[e._v("Ressources insuffisantes")])]),e.canStartMission?t("div",{staticClass:"action"},[t("a",{on:{click:function(s){e.startMission()}}},[e._v("Lancer la mission")])]):e._e()]:e._e()],2)},n=[],a=(t("cadf"),t("551c"),t("097d"),t("6752")),r=t("7a51"),o=t("b3fb"),u=t("7de0"),c={name:"Mission",components:{Squad:a["a"]},data:function(){return{missions:r["d"],selectedMission:null,dureeMission:1}},computed:{indexSquad:function(){return parseInt(this.$route.params.indexSquad)},requiredRessources:function(){return Object(r["a"])(this.selectedMission,this.dureeMission)},canStartMission:function(){return this.selectedMission&&Object(o["b"])(this.requiredRessources)},squad:function(){return u["m"].squads[this.indexSquad]}},methods:{hasRessources:o["b"],startMission:function(){Object(o["d"])(this.requiredRessources),Object(r["e"])(this.squad,this.selectedMission,this.dureeMission),this.$router.push("/squads")}}},d=c,l=(t("1130"),t("2877")),m=Object(l["a"])(d,i,n,!1,null,"4bb2ad2e",null);m.options.__file="Mission.vue";s["default"]=m.exports},"5dbc":function(e,s,t){var i=t("d3f4"),n=t("8b97").set;e.exports=function(e,s,t){var a,r=s.constructor;return r!==t&&"function"==typeof r&&(a=r.prototype)!==t.prototype&&i(a)&&n&&n(e,a),e}},"5eda":function(e,s,t){var i=t("5ca1"),n=t("8378"),a=t("79e5");e.exports=function(e,s){var t=(n.Object||{})[e]||Object[e],r={};r[e]=s(t),i(i.S+i.F*a(function(){t(1)}),"Object",r)}},6752:function(e,s,t){"use strict";var i=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("li",{staticClass:"squad"},[t("div",{staticClass:"icon squad"}),e.showStatus?t("div",{class:["status",e.squad.status]},["mission"===e.squad.status?t("div",[t("p",[e._v("Mission")]),t("span",{staticClass:"time"},[e._v(e._s(e.getSquadMissionTimeLeft(e.squad)))])]):"missionSuccess"===e.squad.status?t("div",{on:{click:function(s){e.missionResume()}}},[t("p",[e._v("Mission accomplie")])]):"missionFail"===e.squad.status?t("div",{on:{click:function(s){e.missionResume()}}},[t("div",{staticClass:"icon fail"})]):"dead"===e.squad.status?t("div",{on:{click:function(s){e.missionResume()}}},[t("div",{staticClass:"icon dead"})]):t("div",[t("p",[t("router-link",{attrs:{to:"mission/"+e.indexSquad}},[e._v("Nouvelle mission")])],1)])]):e._e(),t("span",{staticClass:"name"},[e._v("Escouade "+e._s(e.getSquadName(e.indexSquad)))]),t("p",{staticClass:"level"},[e._v("Niveau de compétence: "+e._s(e.squad.level))])])},n=[],a=(t("c5f6"),t("b05b")),r=t("7a51"),o=t("7de0"),u={name:"Squad",props:{showStatus:{type:Boolean,default:!1},indexSquad:Number},data:function(){return{t:Date.now()}},computed:{squad:function(){return o["m"].squads[this.indexSquad]}},methods:{getSquadName:function(e){return a["b"][e]},formatTime:a["c"],getSquadMissionTimeLeft:function(e){if(!e.missionEndTime)return"";var s=e.missionEndTime-this.t;return s<=0&&Object(r["b"])(e),Object(a["c"])(s)},missionResume:function(){this.$router.push("/mission-resume/"+this.indexSquad)}},created:function(){var e=this;this.tInterval=setInterval(function(){e.t=Date.now()},1e3)},destroyed:function(){clearInterval(this.tInterval)}},c=u,d=(t("c827"),t("2877")),l=Object(d["a"])(c,i,n,!1,null,"0c8d46da",null);l.options.__file="Squad.vue";s["a"]=l.exports},"7a51":function(e,s,t){"use strict";t.d(s,"e",function(){return o}),t.d(s,"b",function(){return u}),t.d(s,"c",function(){return c}),t.d(s,"a",function(){return d}),t.d(s,"d",function(){return m});t("456d"),t("ac6a"),t("f751"),t("cadf"),t("551c"),t("097d");var i=t("025e"),n=t("7de0"),a=t("b3fb"),r=t("c75d"),o=function(e,s,t){e.status="mission",e.mission=s;var i=(s.distance+t)*n["m"].missionTimeFactor*1e3*10;e.missionDuree=t,e.missionEndTime=Date.now()+i,e.missionDifficulty=(s.level+n["m"].currentEpoch)*(5+t)/5,Object(r["c"])("MissionStarted")},u=function(e){delete e.missionEndTime;var s=(4+e.level)/(5+e.missionDifficulty);if(e.missionResult={probaSuccess:s,resume:[],levelGain:0},Math.random()<=s)e.status="missionSuccess",e.missionResult.levelGain+=1,e.missionResult.resume.push(Object(i["d"])(["Aucune activité à signaler","Comme sur des roulettes","Un vrai jeu d'enfant"])),Object(i["c"])(3)&&(e.missionResult.resume.push("On a trouvé des armes pour mieux se défendre lors des prochaines missions."),e.missionResult.levelGain+=Object(i["e"])(1,2)),Object(i["c"])(8)&&(e.missionResult.resume.push("On a trouvé des rescapés prêts à rejoindre nos rangs"),e.missionResult.levelGain+=Object(i["e"])(2,4)),Object(i["c"])(2)&&e.mission.squad&&(e.missionResult.resume.push(Object(i["d"])(["On a trouvé des rescapés prêts à rejoindre nos rangs.","Certains hommes se sont dit prêts à se battre pour nous.","Quelques bras cassés tiennent à nous aider, peut-être on en fera quelque-chose..."])),e.missionResult.squad=Object(i["e"])(1,e.mission.squad)),Object(i["c"])(3)&&e.mission.scientific&&(e.missionResult.resume.push(Object(i["d"])(["Ces scientifiques se cachaient sous les tables quand on est arrivés. Ils disent qu'ils peuvent nous aider.","On a trouvé plusieurs barbus en blouse là-bas. Ils pourraient aider au projet.","Des matheux estiment notre probabilité de survivre à 12%, mais prétendent qu'elles montent à 93% si on les emmène avec nous."])),e.missionResult.scientific=Object(i["e"])(e.mission.scientific-3,e.mission.scientific)),e.missionResult.ressources=l(e.mission.ressources,e.missionDuree,s);else{var t=.5*(1-s);Math.random()<=t?(e.status="dead",e.missionResult.resume.push(Object(i["d"])(["Nous avons perdu le contact avec l'escouade. Aucune idée de ce qu'ils sont devenus","Cette secte a lavé le cerveau de la moitié de l'équipe. Les autres ont été abattus par leur gourou.","Un groupe armé local a tendu une embuscade à l'escouade. Il n'y a aucun survivant."]))):(e.status="missionFail",e.missionResult.resume.push(Object(i["d"])(["Une bande armée nous est tombée dessus. On a rien pu faire pour garder le stock","Les gens sont fous. Dès qu'ils ont vu notre stock, ils se sont rués sur nous. On a du fuir avant qu'il y ait des morts.","L'endroit était occupé par trop de forces hostiles, impossible de s'en rapprocher."])))}},c=function(e){switch(delete e.mission,e.status){case"missionSuccess":Object(r["c"])("MissionComplete"),Object(a["a"])(e.missionResult.ressources),e.level+=e.missionResult.levelGain,e.missionResult.squad&&n["m"].squads.push({level:e.missionResult.squad,status:"idle"}),e.missionResult.scientific&&n["m"].scientifics.push({level:e.missionResult.scientific,status:"idle"}),e.status="idle";break;case"missionFail":Object(r["c"])("MissionAborted"),e.level=Math.max(1,e.level-Object(i["e"])(1,3)),e.status="idle";break;case"dead":Object(r["c"])("MissionFailed"),n["m"].squads.splice(n["m"].squads.indexOf(e),1);break}delete e.missionResult},d=function(e,s){return e?{water:Math.ceil((e.distance+s)*n["m"].ressourcesConsumptionFactor.water),food:Math.ceil((e.distance+s)/2*n["m"].ressourcesConsumptionFactor.food),fuel:Math.ceil(e.distance*n["m"].ressourcesConsumptionFactor.fuel)}:{}},l=function(e,s,t){if(!e)return{};var n=Object.assign({},e),a=Math.max(1,.25*(1+s)*t);return Object.keys(n).forEach(function(e){var t=Math.round(n[e]*a+.8*Object(i["e"])(-s,s));n[e]=Math.max(0,n[e]+t)}),n},m=[{name:"Résidence abandonnée",description:"Cette vieille maison juste à côté doit sûrement contenir quelques ressources utiles",level:1,distance:0,ressources:{food:3,water:5,metal:1,component:1}},{name:"Décharge",description:"Récupérez le métal et les composants utiles, et siphonnez tous les véhicules que vous trouvez",level:3,distance:1,ressources:{fuel:5,metal:10,component:5,battery:2}},{name:"Supermarché",description:"En espérant que ce supermarché n'a pas encore été complètement pillé",level:5,distance:3,ressources:{food:10,water:15,fuel:10,component:3,battery:3}},{name:"Université",description:"L'université est assez loin d'ici, mais notre meilleure chance de recruter des cerveaux",level:8,distance:8,ressources:{food:4,water:4,component:2},scientific:6},{name:"Prison",description:"Il nous faut un maximum d'hommes prêts à tout. Des prisonniers seraient prêts à nous aider si on leur promet une voie de sortie à ce merdier.",level:10,distance:6,ressources:{metal:2,food:4,water:4},squad:5},{name:"Centrale nucléaire",description:"Avec les fuites radioactives, c'est probablement un voyage en aller simple. Mais il nous faut absolument ce plutonium !",level:15,distance:5,ressources:{metal:4,component:5,battery:4,plutonium:3},scientific:10}]},"8b97":function(e,s,t){var i=t("d3f4"),n=t("cb7c"),a=function(e,s){if(n(e),!i(s)&&null!==s)throw TypeError(s+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,s,i){try{i=t("9b43")(Function.call,t("11e9").f(Object.prototype,"__proto__").set,2),i(e,[]),s=!(e instanceof Array)}catch(e){s=!0}return function(e,t){return a(e,t),s?e.__proto__=t:i(e,t),e}}({},!1):void 0),check:a}},"8cd6":function(e,s,t){},aa77:function(e,s,t){var i=t("5ca1"),n=t("be13"),a=t("79e5"),r=t("fdef"),o="["+r+"]",u="​",c=RegExp("^"+o+o+"*"),d=RegExp(o+o+"*$"),l=function(e,s,t){var n={},o=a(function(){return!!r[e]()||u[e]()!=u}),c=n[e]=o?s(m):r[e];t&&(n[t]=c),i(i.P+i.F*o,"String",n)},m=l.trim=function(e,s){return e=String(n(e)),1&s&&(e=e.replace(c,"")),2&s&&(e=e.replace(d,"")),e};e.exports=l},b3fb:function(e,s,t){"use strict";t.d(s,"b",function(){return a}),t.d(s,"d",function(){return r}),t.d(s,"a",function(){return o}),t.d(s,"c",function(){return u});var i=t("9393"),n=(t("ac6a"),t("ffc1"),t("7de0")),a=function(e){return Object.entries(e).every(function(e){var s=Object(i["a"])(e,2),t=s[0],a=s[1];return n["m"].ressources[t]>=a})},r=function(e){Object.entries(e).forEach(function(e){var s=Object(i["a"])(e,2),t=s[0],a=s[1];n["m"].ressources[t]-=a})},o=function(e){Object.entries(e).forEach(function(e){var s=Object(i["a"])(e,2),t=s[0],a=s[1];n["m"].ressources[t]+=a})},u={water:{name:"Eau",description:"consommée par les équipes ou utilisée en laboratoire"},food:{name:"Nourriture",description:"il faut bien nourrir tous les gens de cette base"},fuel:{name:"Carburant",description:"nécessaire au déplacement des escouades"},metal:{name:"Métaux",description:"matière première composant de nombreux objets"},battery:{name:"Batteries",description:"alimentation de nombreux appareils et énergie de secours"},component:{name:"Composants",description:"sert à la fabrication d'appareils plus ou moins complexes"},plutonium:{name:"Plutonium",description:"carburant principal des réacteurs"}}},c5f6:function(e,s,t){"use strict";var i=t("7726"),n=t("69a8"),a=t("2d95"),r=t("5dbc"),o=t("6a99"),u=t("79e5"),c=t("9093").f,d=t("11e9").f,l=t("86cc").f,m=t("aa77").trim,f="Number",p=i[f],v=p,b=p.prototype,h=a(t("2aeb")(b))==f,_="trim"in String.prototype,q=function(e){var s=o(e,!1);if("string"==typeof s&&s.length>2){s=_?s.trim():m(s,3);var t,i,n,a=s.charCodeAt(0);if(43===a||45===a){if(t=s.charCodeAt(2),88===t||120===t)return NaN}else if(48===a){switch(s.charCodeAt(1)){case 66:case 98:i=2,n=49;break;case 79:case 111:i=8,n=55;break;default:return+s}for(var r,u=s.slice(2),c=0,d=u.length;c<d;c++)if(r=u.charCodeAt(c),r<48||r>n)return NaN;return parseInt(u,i)}}return+s};if(!p(" 0o1")||!p("0b1")||p("+0x1")){p=function(e){var s=arguments.length<1?0:e,t=this;return t instanceof p&&(h?u(function(){b.valueOf.call(t)}):a(t)!=f)?r(new v(q(s)),t,p):q(s)};for(var O,M=t("9e1e")?c(v):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),j=0;M.length>j;j++)n(v,O=M[j])&&!n(p,O)&&l(p,O,d(v,O));p.prototype=b,b.constructor=p,t("2aba")(i,f,p)}},c827:function(e,s,t){"use strict";var i=t("8cd6"),n=t.n(i);n.a},d41f:function(e,s,t){},fdef:function(e,s){e.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"}}]);
//# sourceMappingURL=mission.f3b201fc.js.map