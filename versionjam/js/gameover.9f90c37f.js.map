{"version":3,"sources":["webpack:///./src/components/Message.vue?aa1d","webpack:///./src/baragouin.js","webpack:///src/components/Message.vue","webpack:///./src/components/Message.vue?93ea","webpack:///./src/components/Message.vue","webpack:///./src/components/Message.vue?7237","webpack:///./src/views/GameOver.vue?56db","webpack:///src/views/GameOver.vue","webpack:///./src/views/GameOver.vue?94cf","webpack:///./src/views/GameOver.vue","webpack:///./src/views/GameOver.vue?dc88"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","_s","typedText","staticRenderFns","ctx","AudioContext","wavetype","volume","resonance","pitch","rand","min","max","Math","floor","random","note","freq","arguments","length","undefined","duration","o","createOscillator","frequency","value","type","g","createGain","connect","destination","gain","exponentialRampToValueAtTime","currentTime","start","stop","Messagevue_type_script_lang_js_","name","props","text","String","data","speed","watch","shutup","machinetalk","created","destroyed","methods","_this","parts","split","t","tone","coefSpeed","timeouts","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_loop","p","test","nbSyllabs","ceil","_loop2","s","push","setTimeout","slice","trim","_iterator","Symbol","iterator","next","done","err","return","$emit","forEach","clearTimeout","components_Messagevue_type_script_lang_js_","component","Object","componentNormalizer","options","__file","__webpack_exports__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_7_oneOf_1_0_node_modules_css_loader_index_js_ref_7_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_7_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Message_vue_vue_type_style_index_0_id_dbb36b94_lang_postcss_scoped_true___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_7_oneOf_1_0_node_modules_css_loader_index_js_ref_7_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_7_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Message_vue_vue_type_style_index_0_id_dbb36b94_lang_postcss_scoped_true___WEBPACK_IMPORTED_MODULE_0___default","n","attrs","id","_l","message","i","key","on","endmessage","$event","nextMessage","hasWon","showAction","to","_e","gameOverPhases","success","chance","project","saved","fail","game","ressources","plutonium","water","food","GameOvervue_type_script_lang_js_","components","Message","messages","currentPhase","risk","endMessages","mounted","apocalypseDate","$router","audio","Date","now","victory","defeat","playPhase","phase","projectsDone","includes","views_GameOvervue_type_script_lang_js_","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_7_oneOf_1_0_node_modules_css_loader_index_js_ref_7_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_7_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_GameOver_vue_vue_type_style_index_0_lang_postcss___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_7_oneOf_1_0_node_modules_css_loader_index_js_ref_7_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_7_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_GameOver_vue_vue_type_style_index_0_lang_postcss___WEBPACK_IMPORTED_MODULE_0___default"],"mappings":"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","file":"js/gameover.9f90c37f.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"message\"},[_c('p',[_vm._v(_vm._s(_vm.typedText))])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","let ctx = new AudioContext();\nlet wavetype = 'sawtooth'\nlet volume = 5;\nlet resonance = 8;\nlet pitch = 10;\nlet speed = 30;\nlet anger = 0;\n\nlet rand = (min, max) => Math.floor(Math.random() * (max - min)) + min;\n\nexport const note = (\n    freq = (440 + rand(-40, 40)),\n    duration = .5\n) => {\n    let o = ctx.createOscillator();\n    o.frequency.value = freq + (pitch - 50) * 8;\n    o.type = wavetype;\n\n    let g = ctx.createGain()\n    g.connect(ctx.destination);\n    g.gain.value = volume / 100;\n    g.gain.exponentialRampToValueAtTime(0.00001, ctx.currentTime + 0.1 + resonance / 100)\n    o.connect(g);\n\n    o.start(0);\n    o.stop(ctx.currentTime + duration);\n}\n\nexport const play = (nbNotes = 10) => {\n    note();\n    if (nbNotes > 0) {\n        setTimeout(() => play(--nbNotes), 100);\n    }\n}\n\nexport const baragouin = (text) => {\n    let parts = text.split(/\\b/)\n    let t = 0;\n    let tone = 100;\n    let coefSpeed = 1 - speed / 120\n\n    for (let p of parts) {\n        if (/\\w/.test(p)) {\n            let nbSyllabs = Math.round(p.length / 3);\n            for (let s = 0; s < nbSyllabs; s++) {\n                t += 100 * coefSpeed;\n                if (nbSyllabs == 2) tone -= 30;\n                if (nbSyllabs >= 4) tone += rand(-anger / 4, anger / 4);\n\n                let freq = 440 + tone + rand(-anger, anger);\n                setTimeout(() => note(freq, 0.5 * coefSpeed), t);\n            }\n        } else {\n            switch (p.trim()) {\n                case \"\":\n                    t += 50 * coefSpeed;\n                    tone = 90;\n                    break;\n                case \",\":\n                case \";\":\n                    t += 400 * coefSpeed;\n                    tone = 100;\n                    break;\n                case \".\":\n                case \"?\":\n                case \"!\":\n                case \"\\n\":\n                    t += 800 * coefSpeed;\n                    break;\n                case \"...\":\n                case \":\":\n                    t += 1200 * coefSpeed;\n                    break;\n                default: break;\n            }\n        }\n    }\n}","<template>\n    <div class=\"message\">\n        <p>{{typedText}}</p>\n    </div>\n</template>\n\n<script>\nimport { note } from \"@/baragouin\";\n\nexport default {\n  name: \"Message\",\n\n  props: {\n    text: String\n  },\n\n  data() {\n    return {\n      typedText: \"\",\n      speed: 30\n    };\n  },\n\n  watch: {\n    text() {\n      if (this.shutup) this.shutup();\n      this.typedText = \"\";\n      this.shutup = this.machinetalk(this.text);\n    }\n  },\n\n  created() {\n    this.shutup = this.machinetalk(this.text);\n  },\n\n  destroyed() {\n    this.shutup();\n  },\n\n  methods: {\n    machinetalk(text) {\n      let parts = text.split(/\\b/);\n      let t = 0;\n      let tone = 100;\n      let coefSpeed = 1 - this.speed / 120;\n      let timeouts = [];\n\n      for (let p of parts) {\n        if (/\\w/.test(p)) {\n          let nbSyllabs = Math.ceil(p.length / 3);\n          for (let s = 0; s < nbSyllabs; s++) {\n            t += 100 * coefSpeed;\n\n            let freq = 440 + tone;\n            timeouts.push(setTimeout(() => note(freq, 0.5 * coefSpeed), t));\n            timeouts.push(\n              setTimeout(() => {\n                this.typedText += p.slice(s * 3, s * 3 + 3);\n              }, t)\n            );\n          }\n        } else {\n          timeouts.push(\n            setTimeout(() => {\n              this.typedText += p;\n            }, t + 1)\n          );\n          switch (p.trim()) {\n            case \"\":\n              t += 50 * coefSpeed;\n              tone = 90;\n              break;\n            case \",\":\n            case \";\":\n              t += 400 * coefSpeed;\n              tone = 100;\n              break;\n            case \".\":\n            case \"?\":\n            case \"!\":\n            case \"\\n\":\n              t += 800 * coefSpeed;\n              break;\n            case \"...\":\n              t += 1200 * coefSpeed;\n              break;\n            default:\n              break;\n          }\n        }\n      }\n\n      setTimeout(() => {\n        this.$emit(\"endmessage\");\n      }, t + 1000);\n\n      return () => {\n        timeouts.forEach(t => clearTimeout(t));\n      };\n    }\n  }\n};\n</script>\n\n<style lang=\"postcss\" scoped>\n.message {\n  text-align: left;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Message.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Message.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Message.vue?vue&type=template&id=dbb36b94&scoped=true&\"\nimport script from \"./Message.vue?vue&type=script&lang=js&\"\nexport * from \"./Message.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Message.vue?vue&type=style&index=0&id=dbb36b94&lang=postcss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"dbb36b94\",\n  null\n  \n)\n\ncomponent.options.__file = \"Message.vue\"\nexport default component.exports","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/index.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/lib/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Message.vue?vue&type=style&index=0&id=dbb36b94&lang=postcss&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/index.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/lib/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Message.vue?vue&type=style&index=0&id=dbb36b94&lang=postcss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"gameover\"}},[_c('div',{staticClass:\"journal\"},[_vm._l((_vm.messages),function(message,i){return _c('div',{key:i,staticClass:\"operation\"},[_c('Message',{attrs:{\"text\":message},on:{\"endmessage\":function($event){_vm.nextMessage()}}})],1)}),(_vm.hasWon === false && _vm.showAction)?_c('div',{staticClass:\"action\"},[_c('router-link',{attrs:{\"to\":\"/\"}},[_vm._v(\"Game Over\")])],1):_vm._e(),(_vm.hasWon === true && _vm.showAction)?_c('div',{staticClass:\"action\"},[_c('router-link',{attrs:{\"to\":\"/\"}},[_vm._v(\"Félicitations !\")])],1):_vm._e()],2)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n<div id=\"gameover\">\n  <div class=\"journal\">\n    <div class=\"operation\" v-for=\"(message,i) in messages\" :key=\"i\">\n        <Message :text=\"message\" @endmessage=\"nextMessage()\" />\n    </div>\n    <div class=\"action\" v-if=\"hasWon === false && showAction\">\n      <router-link to=\"/\">Game Over</router-link>\n    </div>\n    <div class=\"action\" v-if=\"hasWon === true && showAction\">\n      <router-link to=\"/\">Félicitations !</router-link>\n    </div>\n  </div>\n</div>\n\n</template>\n\n<script>\nimport { state, reserve, deleteSave } from \"@/game\";\nimport { playSound, stopMusic } from \"@/audio\";\n\nimport Message from \"@/components/Message\";\n\nconst gameOverPhases = [\n  {\n    success: \"Initialisation du décollage...\",\n    chance: 0,\n    test: () => true\n  },\n  {\n    project: \"Réacteur nucléaire\",\n    chance: 10,\n    saved: \"saved?\",\n    fail: \"fail?\",\n    success: \"Décollage en cours... le réacteur nucléaire ronronne\"\n  },\n  {\n    chance: 15,\n    test: () => state.ressources.plutonium >= reserve.plutonium,\n    success:\n      \"Nous avons assez de plutonium à bord pour atteindre Titan et récupérer les ressources dont nous avons besoin pour notre développement.\",\n    saved:\n      \"Nos stocks de plutonium étaient insuffisants pour atteindre Titan, heureusement l'ingénieur en chef eut l'idée lumineuse de se servir de la gravité de la météorite comme rampe d'accélération vers notre destination.\",\n    fail:\n      \"Nous n'avons plus un gramme de plutonium à bord, et nos ressources sont épuisées. Une mort lente nous attend...\"\n  },\n  {\n    chance: 5,\n    test: () => state.ressources.water >= reserve.water,\n    success:\n      \"Une fuite du climatisateur nous a fait perdre beaucoup d'eau. Heureusement, nous en avions assez en stock pour réapprovisionner le circuit.\",\n    saved:\n      \"Une brèche dans le réservoir d'eau a deversé plus de la moitié de notre flotte dans l'espace ! Nos réserves sont maintenant insuffisantes. Mais un ingénieur a trouvé une solution pour recycler la vapeur d'eau résiduelle par hydrolyse. Nous allons pouvoir tenir de justesse...\",\n    fail:\n      \"Un incendie en salle des machines nous a obligé d'utiliser le peu de notre stock d'eau qui nous restait. L'incendie est éteint, mais nous allons mourrir de soif d'ici quelques jours...\"\n  },\n  {\n    chance: 5,\n    test: () => state.ressources.food >= reserve.food,\n    success:\n      \"Nos réserves de nourriture nous ont permis de survivre assez longtemps pour que la serre prenne le relais.\",\n    saved:\n      \"Notre stock de nourriture était insuffisant. Heureusement, le maïs génétiquement modifié emporté par le biologiste a poussé en quelques semaines à peine !\",\n    fail:\n      \"Nous n'avons pas assez pris de nourriture, et pour couronner le tout, des souris se sont incrustées à bord et ont grignoté nos stocks. Nous les avons mangés, mais ça ne sera qu'un repas d'un soir. Qu'allons nous faire maintenant ?\"\n  },\n  {\n    project: \"Kebab lyophilisé\",\n    chance: 5,\n    success:\n      \"La nourriture lyophilisée est une idée de génie. On manque d'espace dans le vaisseau, et le ratio valeur nutritive / mètre cube est imbatable pour le kebab lyophilisé.\",\n    saved:\n      \"Il y a eu plusieurs jours où nous avons souffert de la faim. J'aurais aimé que les scientifiques finissent leur recette de kebab.\",\n    fail:\n      \"Cauchemar ! Des rats ont grignoté notre stock de nourriture, attiré par l'odeur. Je savais qu'on aurait dû prendre de la bouffe lyophilisée sous vide.\"\n  },\n  {\n    project: \"Scanner\",\n    chance: 5,\n    success:\n      \"La météorite avait quelques copains dans son sillage. Le scanner les a détecté assez vite pour qu'on puisse adapter notre trajectoire.\",\n    saved:\n      \"Une nuée d'astéroïdes plus petits accompagnait la météorite. Sans scanner, nous les avons détecté au dernier moment. Le pilote de garde les a évité au dernier moment, ça ne s'est joué à rien.\",\n    fail:\n      \"La mission s'est terminée brutalement lorsqu'un astéroïde a heurté la coque. Il y a une brèche et nous perdons notre air. Finalement, les météorites auront eu notre peau...\"\n  },\n  {\n    project: \"Laboratoire embarqué\",\n    chance: 5,\n    success:\n      \"Nous avons pu extraire des minerais de la ceinture d'astéroïdes, et utiliser le laboratoire pour les raffiner. Ces métaux sont ce avec quoi nous construierons notre futur.\",\n    saved:\n      \"Après plusieurs mois, nous manquons de matériel pour effectuer les réparations qui s'imposent. Sans laboratoire, nous sommes obligés de démonter le mobilier pour obtenir les ressources dont nous avons besoin. C'est très inconfortable, mais on devrait tenir le coup.\",\n    fail:\n      \"Une épidémie de grippe s'est déclarée à bord. Un problème mineur sur Terre devient catastrophique dans un vaisseau spatial. Nous n'avons pas de laboratoire pour synthétiser des médicaments. Déjà trois morts, et tous les autres sont contaminés et déjà bien fiévreux... Est-ce la fin ?\"\n  },\n  {\n    project: \"Coque antiradiation\",\n    chance: 10,\n    success:\n      \"Une éruption solaire a bien remué la coque antiradiation hier, mais celle-ci a encaissé le choc sans broncher. Beau boulot, les gens du labo !\",\n    saved:\n      \"Le vent solaire a bousillé nos capteurs externes. On savait à quoi s'attendre sans coque antirad, c'est pourquoi on a mis l'ordinateur de bord sur une trajectoire préprogrammée. On vole à l'aveugle désormais...\",\n    fail:\n      \"Cette saloperie de soleil nous a envoyé une vague de radiations qui a détruit la plupart de nos appareils électroniques. Le système de survie est complètement détraqué, et l'oxygène se raréfie. J'essaie de réparer mais j'ai de plus en plus de mal à réfléchir. Je suis... si fatigué...\"\n  },\n  {\n    project: \"Panneaux solaires\",\n    chance: 10,\n    success:\n      \"Nos batteries à plat, les panneaux solaires ont pris le relais. On a assez d'énergie pour alimenter tout le vaisseau et faire fonctionner la propulsion secondaire.\",\n    saved:\n      \"On allait être à cours de jus, plus de plutonium ni de batteries... Mais la fille du labo a plus d'un tour dans son sac. Ele a bricolé des ailes solaires à greffer au vaisseau, qui devraient nous fournir assez d'électricité pour maintenir les systèmes principaux.\",\n    fail:\n      \"On a plus de carburant et nos batteries sont quasiment à plat. Avec quoi on est censés alimenter en énergie ce foutu vaisseau ? On a coupé le chauffage et la lumière pour retarder l'inévitable, mais à quoi bon ?\"\n  },\n  {\n    project: \"Caissons de survie\",\n    chance: 10,\n    success:\n      \"La propulsion secondaire fonctionne, mais le vaisseau avance très lentement. Si on veut atteindre Titan à cette allure, il va falloir en mettre quelques-uns dans les caissons de survie. Allez, hop, au frigo.\",\n    saved:\n      \"On bouffe trop d'oxygène et de biomasse, on ne tiendra pas la longueur à cette vitesse là. Sans caisson de survie, on a dû improviser: le médecin de bord a plongé la moitié de l'équipage non critique en coma artificiel pour ralentir leurs fonctions vitales. Ça a été une décision difficile, mais aux grands maux, les grands remèdes.\",\n    fail:\n      \"Le climatisateur est défectueux et n'arrive pas à fournir assez d'oxygène à tout le monde. Les gens commencent à paniquer, ce qui a pour effet de bouffer encore plus de O2. Que tout le monde se calme ! Arrêtez !\"\n  },\n  {\n    project: \"Serre hydroponique\",\n    chance: 10,\n    success:\n      \"La serre hydroponique tient ses promesses. On a de belles tomates, des patates, et même des fraises de l'espace !\",\n    saved:\n      \"On a pas eu le temps de faire cette serre dans le vaisseau, mais il faut bien bouffer. Le biologiste a eu la présence d'esprit d'emmener de la terre et des graines. On est en train d'aménager un potager improvisé dans la salle des machines près du réacteur, là où il fait chaud.\",\n    fail:\n      \"On y est, le moment fatidique où les dernières réserves de nourriture sont épuisées. On a des graines mais pas de serre pour les faire pousser ! Les patates que le doc a voulu faire pousser aux WC ont crevées. Ce sera bientôt notre tour.\"\n  },\n  {\n    project: \"Intelligence artificielle\",\n    chance: 5,\n    success:\n      \"Alors que le gros de l'équipage dormait, une défaillance de la ventilation a bloqué l'arrivée de l'oxygène et fait perdre connaissance au personnel de garde. Sans Amy, notre IA, on y serait tous restés. Je vais même finir par l'apprécier.\",\n    saved:\n      \"Un bug logiciel a interverti deux bits et multiplié notre vitesse de rotation par 1024. L'équipage a perdu connaissance sous la pression, mais un des marines a eu l'estomac assez accroché pour ramper jusqu'aux commandes désactiver le système. Qui eut cru qu'on aurait besoin de ces gars là ?\",\n    fail:\n      \"Un incident dans le réacteur a provoqué une réaction en chaîne. Une IA aurait pu être assez rapide pour intervenir, mais l'ingénieur n'a rien pu faire. Le réacteur a explosé et presque coupé le vaisseau en deux. Les dernières bulles d'air s'échappent de la carlingue...\"\n  },\n  {\n    project: \"Armes nucléaires tactiques\",\n    chance: 5,\n    success:\n      \"Découverte incroyable, un vaisseau alien ressemblant à un zeppelin est venu observer le spectacle de l'impact de la météorite sur Terre. Lorsque nous les avons approché, tout l'équipage a soudain été pris de violents maux de tête. Le commandant a donné ordre d'utiliser les ogives nucléaires pour détruire le vaisseau, ce qui a immédiatement cessé les douleurs. Notre premier contact avec une espèce extraterrestre fut aussi court que douloureux.\",\n    saved:\n      \"Incroyable, un vaisseau inconnu de forme oblongue s'est mis en orbite géostationnaire autour de ce qui reste de notre Terre. Nous avons voulu les approcher mais ils ont disparu à vitesse supraluminique. Le commandant pense à une hallucination collective, mais je sais ce que j'ai vu.\",\n    fail:\n      \"L'intercom a hurlé pour nous indiquer la présence d'un vaisseau extraterrestre à proximité de l'Odyssée. Nous avons tous cru à une mauvaise plaisanterie jusqu'à ce que la carlingue commence à grincer comme si on l'enserrait dans un étau. Sans aucune arme pour nous défendre, nous essayons vainement de communiquer avec ces aliens. Mais l'espace se comprime autour de nous et je commence à suffoquer...\"\n  }\n];\n\nexport default {\n  name: \"Gameover\",\n\n  components: {\n    Message\n  },\n\n  data() {\n    return {\n      messages: [],\n      message: null,\n      currentPhase: 0,\n      chance: Math.random() * 100,\n      risk: 0,\n      hasWon: undefined,\n      endMessages: false,\n      showAction: false\n    };\n  },\n\n  mounted() {\n    if (!state.apocalypseDate) {\n      this.$router.push(\"/\");\n    }\n\n    stopMusic();\n\n    if (state.apocalypseDate <= Date.now()) {\n      this.messages.push(`Le vaisseau Odyssée n'a pas pu décoller à temps.`);\n      this.message = this.messages[this.messages.length - 1];\n      this.hasWon = false;\n      // ta pas décollé t mort lol\n    } else {\n      this.nextMessage();\n    }\n  },\n\n  methods: {\n    nextMessage() {\n      if (this.endMessages) {\n        this.showAction = true;\n        return;\n      }\n      if (this.currentPhase >= gameOverPhases.length) {\n        this.hasWon = true;\n        this.victory();\n        deleteSave();\n      } else if (this.hasWon === false) {\n        this.defeat();\n        deleteSave();\n      } else if (this.hasWon === undefined) {\n        this.playPhase(this.currentPhase);\n        this.message = this.messages[this.messages.length - 1];\n        this.currentPhase++;\n      }\n    },\n    playPhase(n) {\n      let phase = gameOverPhases[n];\n      if (phase.project) {\n        phase.test = () => state.projectsDone.includes(phase.project);\n      }\n\n      if (phase.test()) {\n        // phase réussie\n        this.risk += phase.chance;\n        this.messages.push(phase.success);\n      } else if (this.chance >= this.risk) {\n        // phase sauvée de justesse\n        this.risk += phase.chance;\n        this.messages.push(phase.saved);\n      } else {\n        // pas de sauvetage inespéré, on teste\n\n        if (phase.test()) {\n          // phase réussie\n          this.risk += phase.chance;\n          this.messages.push(phase.success);\n        } else {\n          // échec\n          this.messages.push(phase.fail);\n          this.hasWon = false;\n        }\n      }\n    },\n\n    victory() {\n      this.endMessages = true;\n      playSound(\"YouWin\");\n      this.messages.push(\n        `La mission Odyssée est un succès ! L'humanité a encore de l'espoir grâce à vous.`\n      );\n    },\n\n    defeat() {\n      this.endMessages = true;\n      playSound(\"YouLose\");\n      this.messages.push(\n        `C'est fini... le dernier espoir de l'humanité s'est éteint. Peut-être que si vous aviez fait d'autres choix, il en serait autrement...`\n      );\n    }\n  }\n};\n</script>\n\n<style lang=\"postcss\">\n#gameover {\n  background-image: url(\"../assets/gameover.png\");\n  background-size: 100% 100%;\n  padding: 8px;\n  position: absolute;\n  height: 100% !important;\n  top: 0;\n  right: 0;\n  left: 0;\n  bottom: 0;\n\n  .journal {\n    border-radius: 8px;\n    border: 1px solid goldenrod;\n    padding: 0.5em 0;\n    height: 100%;\n    overflow: auto;\n    text-align: left;\n\n    p {\n      text-shadow: 2px 3px 5px black;\n      margin-bottom: 0.5em;\n    }\n  }\n\n  .action {\n    margin-top: 2em;\n  }\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GameOver.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GameOver.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./GameOver.vue?vue&type=template&id=aa8af3e4&\"\nimport script from \"./GameOver.vue?vue&type=script&lang=js&\"\nexport * from \"./GameOver.vue?vue&type=script&lang=js&\"\nimport style0 from \"./GameOver.vue?vue&type=style&index=0&lang=postcss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"GameOver.vue\"\nexport default component.exports","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/index.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/lib/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GameOver.vue?vue&type=style&index=0&lang=postcss&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/index.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/lib/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GameOver.vue?vue&type=style&index=0&lang=postcss&\""],"sourceRoot":""}