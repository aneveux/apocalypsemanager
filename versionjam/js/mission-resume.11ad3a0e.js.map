{"version":3,"sources":["webpack:///./src/views/MissionResume.vue?c7b8","webpack:///src/views/MissionResume.vue","webpack:///./src/views/MissionResume.vue?81ad","webpack:///./src/views/MissionResume.vue","webpack:///./node_modules/core-js/modules/es6.object.keys.js","webpack:///./node_modules/core-js/modules/_object-sap.js","webpack:///./src/missions.js","webpack:///./src/ressources.js","webpack:///./src/views/MissionResume.vue?b45e"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","id","_v","staticClass","_s","mission","name","description","probaSucces","on","click","$event","$router","push","squad","status","_e","_l","missionResult","event","i","key","val","class","scientific","staticRenderFns","MissionResumevue_type_script_lang_js_","data","created","game","squads","indexSquad","Object","utils","missions","computed","parseInt","$route","params","pc","Math","round","probaSuccess","max","min","views_MissionResumevue_type_script_lang_js_","component","componentNormalizer","options","__file","__webpack_exports__","toObject","__webpack_require__","$keys","it","$export","core","fails","module","exports","KEY","exec","fn","exp","S","F","startMission","dureeMission","duree","distance","_game__WEBPACK_IMPORTED_MODULE_7__","missionTimeFactor","missionDuree","missionEndTime","Date","now","missionDifficulty","level","currentEpoch","_audio__WEBPACK_IMPORTED_MODULE_9__","endMission","resume","levelGain","random","_utils__WEBPACK_IMPORTED_MODULE_6__","ressources","calcRessourcesObtained","probaDeath","missionResume","_ressources__WEBPACK_IMPORTED_MODULE_8__","scientifics","splice","indexOf","calcRequiredRessources","water","ceil","ressourcesConsumptionFactor","food","fuel","obtained","assign","factor","keys","forEach","res","randomGain","metal","battery","plutonium","hasRessources","entries","every","_ref","_ref2","W_games_apocalypsemanager_node_modules_babel_runtime_helpers_builtin_es6_slicedToArray__WEBPACK_IMPORTED_MODULE_0__","nb","_game__WEBPACK_IMPORTED_MODULE_3__","takeRessources","_ref3","_ref4","getRessources","_ref5","_ref6","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_7_oneOf_1_0_node_modules_css_loader_index_js_ref_7_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_7_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_MissionResume_vue_vue_type_style_index_0_id_3e3c606f_lang_postcss_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_7_oneOf_1_0_node_modules_css_loader_index_js_ref_7_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_7_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_MissionResume_vue_vue_type_style_index_0_id_3e3c606f_lang_postcss_scoped_true___WEBPACK_IMPORTED_MODULE_0___default","n"],"mappings":"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","file":"js/mission-resume.11ad3a0e.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.mission)?_c('div',{attrs:{\"id\":\"missionresume\"}},[_c('h1',[_vm._v(\"Mission\")]),_c('ul',[_c('li',{staticClass:\"mission\"},[_c('span',{staticClass:\"name\"},[_vm._v(_vm._s(_vm.mission.name))]),_c('p',{staticClass:\"description\"},[_vm._v(_vm._s(_vm.mission.description))]),_c('p',[_vm._v(\"Probabilité de succès: \"+_vm._s(_vm.probaSucces)+\"%\")])])]),_c('h1',[_vm._v(\"Résultat de la mission\")]),_c('div',{staticClass:\"resultat\",on:{\"click\":function($event){_vm.$router.push('/squads')}}},[(_vm.squad.status === 'missionSuccess')?_c('div',[_c('h2',[_vm._v(\"Mission accomplie !\")])]):(_vm.squad.status === 'missionFail')?_c('div',[_c('div',{staticClass:\"icon fail\"}),_c('h2',[_vm._v(\"Echec de la mission\")])]):(_vm.squad.status === 'dead')?_c('div',[_c('div',{staticClass:\"icon dead\"}),_c('h2',[_vm._v(\"Echec critique\")])]):_vm._e()]),_vm._l((_vm.squad.missionResult.resume),function(event,i){return _c('p',{key:i},[_vm._v(_vm._s(event))])}),(_vm.squad.status === 'missionSuccess')?[_c('h1',[_vm._v(\"Ressources obtenues\")]),_c('ul',{staticClass:\"ressources\"},_vm._l((_vm.squad.missionResult.ressources),function(val,key){return _c('li',{key:key},[(val > 0)?[_vm._v(\"\\n                    \"+_vm._s(val)+\" \"),_c('div',{class:['icon', key]})]:_vm._e()],2)})),(_vm.squad.missionResult.squad || _vm.squad.missionResult.scientific)?[_c('h1',[_vm._v(\"Personnes recrutées\")]),_c('ul',{staticClass:\"ressources\"},[(_vm.squad.missionResult.squad)?_c('li',[_c('div',{staticClass:\"icon squad\"}),_vm._v(\" de niveau \"+_vm._s(_vm.squad.missionResult.squad)+\"\\n                \")]):_vm._e(),(_vm.squad.missionResult.scientific)?_c('li',[_c('div',{staticClass:\"icon scientific\"}),_vm._v(\" de niveau \"+_vm._s(_vm.squad.missionResult.squad)+\"\\n                \")]):_vm._e()])]:_vm._e()]:_vm._e()],2):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n<div id=\"missionresume\" v-if=\"mission\">\n    <h1>Mission</h1>\n    <ul>\n        <li class=\"mission\">\n            <span class=\"name\">{{mission.name}}</span>\n            <p class=\"description\">{{mission.description}}</p>\n            <p>Probabilité de succès: {{probaSucces}}%</p>\n        </li>\n    </ul>\n    <h1>Résultat de la mission</h1>\n    <div class=\"resultat\" @click=\"$router.push('/squads')\">\n        <div v-if=\"squad.status === 'missionSuccess'\">\n            <h2>Mission accomplie !</h2>\n        </div>\n        <div v-else-if=\"squad.status === 'missionFail'\">\n            <div class=\"icon fail\"></div>\n            <h2>Echec de la mission</h2>\n        </div>\n        <div v-else-if=\"squad.status === 'dead'\">\n            <div class=\"icon dead\"></div>\n            <h2>Echec critique</h2>\n        </div>\n    </div>\n    <p v-for=\"(event,i) in squad.missionResult.resume\" :key=\"i\">{{event}}</p>\n\n    <template v-if=\"squad.status === 'missionSuccess'\">\n        <h1>Ressources obtenues</h1>\n         <ul class=\"ressources\">\n            <li v-for=\"(val,key) in squad.missionResult.ressources\" :key=\"key\">\n                <template v-if=\"val > 0\">\n                    {{val}} <div :class=\"['icon', key]\"></div>\n                </template>\n            </li>\n        </ul>\n        <template v-if=\"squad.missionResult.squad || squad.missionResult.scientific\">\n            <h1>Personnes recrutées</h1>\n            <ul class=\"ressources\">\n                <li v-if=\"squad.missionResult.squad\">\n                    <div class=\"icon squad\"></div> de niveau {{squad.missionResult.squad}}\n                </li>\n                <li v-if=\"squad.missionResult.scientific\">\n                    <div class=\"icon scientific\"></div> de niveau {{squad.missionResult.squad}}\n                </li>\n            </ul>\n        </template>\n    </template>\n</div>\n</template>\n\n<script>\nimport { state } from \"@/game\";\nimport { missionResume } from \"@/missions\";\nimport { clone } from \"@/utils\";\n\nexport default {\n  name: \"MissionResume\",\n\n  data() {\n    return { mission: null, squad: null };\n  },\n\n  created() {\n    let squad = state.squads[this.indexSquad];\n    this.squad = clone(squad);\n    this.mission = this.squad.mission;\n    missionResume(squad);\n  },\n\n  computed: {\n    indexSquad() {\n      return parseInt(this.$route.params.indexSquad);\n    },\n    probaSucces() {\n      let pc = Math.round(this.squad.missionResult.probaSuccess * 100);\n      pc = Math.max(0, Math.min(100, pc));\n      return pc;\n    }\n  }\n};\n</script>\n\n<style lang=\"postcss\" scoped>\nh1 {\n  background-color: rgba(255, 255, 255, 0.1);\n  margin-bottom: 0.5em;\n\n  &:not(:first-of-type) {\n    margin-top: 0.5em;\n  }\n}\n\n.icon {\n  display: inline-block;\n  width: 36px;\n  height: 36px;\n  background-size: 36px 36px;\n  margin: 0 0.5em 0 0;\n  vertical-align: middle;\n}\n\n.ressources li {\n  display: inline-block;\n  margin: 8px;\n}\n\n.resultat .icon {\n  width: 48px;\n  height: 48px;\n  background-size: 48px 48px;\n  margin: 0;\n}\n\np {\n  padding: 0 0.5em;\n}\n</style>\n\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MissionResume.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MissionResume.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./MissionResume.vue?vue&type=template&id=3e3c606f&scoped=true&\"\nimport script from \"./MissionResume.vue?vue&type=script&lang=js&\"\nexport * from \"./MissionResume.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MissionResume.vue?vue&type=style&index=0&id=3e3c606f&lang=postcss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3e3c606f\",\n  null\n  \n)\n\ncomponent.options.__file = \"MissionResume.vue\"\nexport default component.exports","// 19.1.2.14 Object.keys(O)\nvar toObject = require('./_to-object');\nvar $keys = require('./_object-keys');\n\nrequire('./_object-sap')('keys', function () {\n  return function keys(it) {\n    return $keys(toObject(it));\n  };\n});\n","// most Object methods by ES6 should accept primitives\nvar $export = require('./_export');\nvar core = require('./_core');\nvar fails = require('./_fails');\nmodule.exports = function (KEY, exec) {\n  var fn = (core.Object || {})[KEY] || Object[KEY];\n  var exp = {};\n  exp[KEY] = exec(fn);\n  $export($export.S + $export.F * fails(function () { fn(1); }), 'Object', exp);\n};\n","import { coinflip, randomBetween, pickRandom } from \"@/utils\";\nimport { state } from \"@/game\";\nimport { getRessources } from \"@/ressources\";\nimport { playSound } from \"./audio\";\n\nexport const startMission = (squad, mission, dureeMission) => {\n    squad.status = \"mission\";\n    squad.mission = mission;\n    let duree = (mission.distance + dureeMission) * state.missionTimeFactor * 1000 * 10;\n    squad.missionDuree = dureeMission\n    squad.missionEndTime = Date.now() + duree\n    squad.missionDifficulty = (mission.level + state.currentEpoch) * (5 + dureeMission) / 5\n    playSound(\"MissionStarted\")\n}\n\nexport const endMission = squad => {\n    delete squad.missionEndTime;\n\n    let probaSucces = (4 + squad.level) / (5 + squad.missionDifficulty)\n\n    squad.missionResult = {\n        probaSuccess: probaSucces,\n        resume: [],\n        levelGain: 0\n    }\n\n    if (Math.random() <= probaSucces) {\n        squad.status = \"missionSuccess\";\n\n        squad.missionResult.levelGain += 1; // expérience de la mission\n\n        squad.missionResult.resume.push(pickRandom([\n            \"Aucune activité à signaler\",\n            \"Comme sur des roulettes\",\n            \"Un vrai jeu d'enfant\"\n        ]))\n\n        if (coinflip(3)) {\n            squad.missionResult.resume.push(\"On a trouvé des armes pour mieux se défendre lors des prochaines missions.\")\n            squad.missionResult.levelGain += randomBetween(1, 2)\n        }\n        if (coinflip(8)) {\n            squad.missionResult.resume.push(\"On a trouvé des rescapés prêts à rejoindre nos rangs\")\n            squad.missionResult.levelGain += randomBetween(2, 4)\n        }\n        if (coinflip(2) && squad.mission.squad) {\n            squad.missionResult.resume.push(pickRandom([\n                \"On a trouvé des rescapés prêts à rejoindre nos rangs.\",\n                \"Certains hommes se sont dit prêts à se battre pour nous.\",\n                \"Quelques bras cassés tiennent à nous aider, peut-être on en fera quelque-chose...\"\n            ]))\n            squad.missionResult.squad = randomBetween(1, squad.mission.squad)\n        }\n        if (coinflip(3) && squad.mission.scientific) {\n            squad.missionResult.resume.push(pickRandom([\n                \"Ces scientifiques se cachaient sous les tables quand on est arrivés. Ils disent qu'ils peuvent nous aider.\",\n                \"On a trouvé plusieurs barbus en blouse là-bas. Ils pourraient aider au projet.\",\n                \"Des matheux estiment notre probabilité de survivre à 12%, mais prétendent qu'elles montent à 93% si on les emmène avec nous.\"\n            ]))\n            squad.missionResult.scientific = randomBetween(squad.mission.scientific - 3, squad.mission.scientific)\n        }\n\n        squad.missionResult.ressources = calcRessourcesObtained(squad.mission.ressources, squad.missionDuree, probaSucces)\n    } else {\n        let probaDeath = 0.5 * (1 - probaSucces)\n        if (Math.random() <= probaDeath) {\n            squad.status = \"dead\";\n            squad.missionResult.resume.push(pickRandom([\n                \"Nous avons perdu le contact avec l'escouade. Aucune idée de ce qu'ils sont devenus\",\n                \"Cette secte a lavé le cerveau de la moitié de l'équipe. Les autres ont été abattus par leur gourou.\",\n                \"Un groupe armé local a tendu une embuscade à l'escouade. Il n'y a aucun survivant.\"\n            ]))\n        } else {\n            squad.status = \"missionFail\";\n            squad.missionResult.resume.push(pickRandom([\n                \"Une bande armée nous est tombée dessus. On a rien pu faire pour garder le stock\",\n                \"Les gens sont fous. Dès qu'ils ont vu notre stock, ils se sont rués sur nous. On a du fuir avant qu'il y ait des morts.\",\n                \"L'endroit était occupé par trop de forces hostiles, impossible de s'en rapprocher.\"\n            ]))\n        }\n    }\n}\n\nexport const missionResume = (squad) => {\n    delete squad.mission;\n\n    switch (squad.status) {\n        case \"missionSuccess\":\n            playSound(\"MissionComplete\")\n            getRessources(squad.missionResult.ressources);\n            squad.level += squad.missionResult.levelGain;\n            if (squad.missionResult.squad) {\n                state.squads.push({\n                    level: squad.missionResult.squad,\n                    status: \"idle\"\n                })\n            }\n            if (squad.missionResult.scientific) {\n                state.scientifics.push({\n                    level: squad.missionResult.scientific,\n                    status: \"idle\"\n                })\n            }\n            squad.status = \"idle\";\n            break;\n        case \"missionFail\":\n            playSound(\"MissionAborted\")\n            squad.level = Math.max(1, squad.level - randomBetween(1, 3));\n            squad.status = \"idle\";\n            break;\n        case \"dead\":\n            playSound(\"MissionFailed\")\n            state.squads.splice(state.squads.indexOf(squad), 1);\n            break;\n    }\n\n    delete squad.missionResult\n}\n\nexport const calcRequiredRessources = (mission, duree) => {\n    if (!mission) return {};\n    return {\n        water: Math.ceil((mission.distance + duree) * state.ressourcesConsumptionFactor.water),\n        food: Math.ceil((mission.distance + duree) / 2 * state.ressourcesConsumptionFactor.food),\n        fuel: Math.ceil(mission.distance * state.ressourcesConsumptionFactor.fuel)\n    }\n}\n\nexport const calcRessourcesObtained = (ressources, duree, probaSucces) => {\n    if (!ressources) return {};\n    let obtained = Object.assign({}, ressources);\n    let factor = Math.max(1, (1 + duree) * 0.25 * probaSucces);\n    Object.keys(obtained).forEach(res => {\n        let randomGain = Math.round(obtained[res] * factor + randomBetween(-duree, duree) * 0.8);\n        obtained[res] = Math.max(0, obtained[res] + randomGain)\n    })\n    return obtained\n}\n\nexport const missions = [\n    {\n        name: \"Résidence abandonnée\",\n        description: \"Cette vieille maison juste à côté doit sûrement contenir quelques ressources utiles\",\n        level: 1,\n        distance: 0,\n        ressources: {\n            food: 3,\n            water: 5,\n            metal: 1,\n            component: 1\n        }\n    },\n    {\n        name: \"Décharge\",\n        description: \"Récupérez le métal et les composants utiles, et siphonnez tous les véhicules que vous trouvez\",\n        level: 3,\n        distance: 1,\n        ressources: {\n            fuel: 5,\n            metal: 10,\n            component: 5,\n            battery: 2\n        }\n    },\n    {\n        name: \"Supermarché\",\n        description: \"En espérant que ce supermarché n'a pas encore été complètement pillé\",\n        level: 5,\n        distance: 3,\n        ressources: {\n            food: 10,\n            water: 15,\n            fuel: 10,\n            component: 3,\n            battery: 3\n        }\n    },\n    {\n        name: \"Université\",\n        description: \"L'université est assez loin d'ici, mais notre meilleure chance de recruter des cerveaux\",\n        level: 8,\n        distance: 8,\n        ressources: {\n            food: 4,\n            water: 4,\n            component: 2\n        },\n        scientific: 6\n    },\n    {\n        name: \"Prison\",\n        description: \"Il nous faut un maximum d'hommes prêts à tout. Des prisonniers seraient prêts à nous aider si on leur promet une voie de sortie à ce merdier.\",\n        level: 10,\n        distance: 6,\n        ressources: {\n            metal: 2,\n            food: 4,\n            water: 4,\n        },\n        squad: 5\n    },\n    {\n        name: \"Centrale nucléaire\",\n        description: \"Avec les fuites radioactives, c'est probablement un voyage en aller simple. Mais il nous faut absolument ce plutonium !\",\n        level: 15,\n        distance: 5,\n        ressources: {\n            metal: 4,\n            component: 5,\n            battery: 4,\n            plutonium: 3\n        },\n        scientific: 10\n    }\n]","import { state } from \"@/game\"\n\nexport const hasRessources = ressources => {\n    return Object.entries(ressources).every(([res, nb]) => state.ressources[res] >= nb)\n}\n\nexport const takeRessources = ressources => {\n    Object.entries(ressources).forEach(([res, nb]) => {\n        state.ressources[res] -= nb;\n    })\n}\n\nexport const getRessources = ressources => {\n    Object.entries(ressources).forEach(([res, nb]) => {\n        state.ressources[res] += nb;\n    })\n}\n\nexport const ressources = {\n    water: {\n        name: \"Eau\",\n        description: \"consommée par les équipes ou utilisée en laboratoire\"\n    },\n    food: {\n        name: \"Nourriture\",\n        description: \"il faut bien nourrir tous les gens de cette base\"\n    },\n    fuel: {\n        name: \"Carburant\",\n        description: \"nécessaire au déplacement des escouades\"\n    },\n    metal: {\n        name: \"Métaux\",\n        description: \"matière première composant de nombreux objets\"\n    },\n    battery: {\n        name: \"Batteries\",\n        description: \"alimentation de nombreux appareils et énergie de secours\"\n    },\n    component: {\n        name: \"Composants\",\n        description: \"sert à la fabrication d'appareils plus ou moins complexes\"\n    },\n    plutonium: {\n        name: \"Plutonium\",\n        description: \"carburant principal des réacteurs\"\n    }\n}","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/index.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/lib/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MissionResume.vue?vue&type=style&index=0&id=3e3c606f&lang=postcss&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/index.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/lib/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MissionResume.vue?vue&type=style&index=0&id=3e3c606f&lang=postcss&scoped=true&\""],"sourceRoot":""}